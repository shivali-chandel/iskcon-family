<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ISKCON</title>
    <base href="/">
    <link rel="shortcut icon" href="assets/images/favicon.png" />
    <!--Default Style For HTML 5 Tags-->
    <link href="./assets/css/reset.css" type="text/css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Crimson+Text" rel="stylesheet">
    <!--Main Style Included-->
    <link href="./assets/css/style.css" type="text/css" rel="stylesheet" />
    <!-- Bootstrap -->
    <link href="./assets/css/bootstrap.css" rel="stylesheet">
    <!--Extra Style Included-->
    <!--Main Js Included-->
    <script src="./assets/js/lib/jquery.js" type="text/javascript"></script>
    <script src="./assets/js/modernizr.js" type="text/javascript"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="./assets/js/bootstrap.js"></script>
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="./assets/images/favicon.png">
	
</head>
<body>
    <div class="main">
       
            <header id="masthead" role="banner">
                <div class="container">
                    <div class="logo-block">
                        <a href="/"><img src="./assets/images/iskcon_logo.png" alt="" /></a>
                    </div>

                    <button class="hamburger hamburger--boring"  type="button">
                        <span class="hamburger-box">
                            <span class="hamburger-inner"></span>
                        </span>
                        <!-- <span class="hamburger-label">Menu</span> -->
                    </button>

                    <nav id="site-nav" role="navigation">
                        <ul>
                            <li class="home"><a href="/">Home</a></li>
                            <li class="gl"><a href="/group-locator-builder">Group Locator Builder</a></li>
                            <li class="tnc"><a href="/terms-and-condition">Terms & Privacy Policy</a></li>
                            <li class="login active"><a href="/login">Login</a></li>
                            <li class="tnc"><a href="/newsletter">Sankirtan NewsLetter</a></li>
                        </ul>
                    </nav>
                </div>
            </header>

            <div class="container-fuild-page">
                <div style="background-color:#676767; padding: 10px;line-height: 26px">
                    <div style="margin:20px,0;">
                        <div id="breadcrumbs"><a href="javascript:void(0)">Home</a> &gt; <span class="breadcrumb_last">Login</div>
                    </div>
                </div>
                <!-- Login Form-->
                <div style="background-color:#f2673a;padding: 40px 0px 40px 0px;">
                    <div class="row">
                        <div class="col-12 text-center" style="margin-bottom:20px;">
                            <img  height="60px" src="./assets/images/iskcon_logo.png" />

                        </div>
                    </div>
                    <div class="row text-center">
                        <div class="col-md-2"></div>
                        <div class="col-md-8">
                            <form class="elementor-form" method="post" id="frmThirdParty" name="Login Form">
                                <!-- <input size="1" type="hidden" name="form_fields[login_login_redirect]" id="form-field-login_login_redirect" class="elementor-field elementor-size-sm  elementor-field-textual" value="iskconfamily.elvanto.net"> -->
                                <!--  changes on 31 augast -->
                                <input size="1" type="hidden" name="form_fields[login_login_redirect]" id="form-field-login_login_redirect"
                                    class="elementor-field elementor-size-sm  elementor-field-textual" value="iskcon.elvanto.net">
                                <div class="field-group col-md-11">
                                    <span style="clear:both;display:none;" class="sperror" id="spIskconCommon"></span>
                                </div>
                                <div class="field-group col-md-11">

                                </div>
                                <div class="form-group col-md-11">
                                    <input type="text" name="form_fields[login_username]" id="form-field-login_username" class="form-control" placeholder="Username or Email Id*" required="required" aria-required="true">
                                </div>
                                <div class="form-group col-md-11">
                                    <span style="clear:both;display:none;color:red;" class="sperror" id="spIskconUsername"></span>
                                </div>
                                <div class="form-group col-md-11">
                                    <input type="password" name="form_fields[login_password]" id="form-field-login_password" class="form-control" placeholder="Password*" required="required" aria-required="true">
                                </div>
                                <div class="form-group col-md-11">
                                    <span style="clear:both;display:none;color:red;" class="sperror" id="spIskconPassword"></span>
                                </div>
                                <div class="form-group col-md-11">
                                    <button type="submit" class="btn btn-primary LoginButton" id="Log_In_Button_1">Log In</button>

                                </div>
                                <button 
                                class="g-recaptcha" 
        data-sitekey="6LfNwc0ZAAAAAGGY8224ROTY3g8WTsz1pDwuNcxQ" 
        data-callback='onSubmit' 
        data-action='submit'></button>
                            </form>
                        </div>
                    </div>

                </div>
                <!-- End of Login Form-->
                <!-- Registration Form-->
                <div  style="height : 0px !important">
                    <div class="row">
                        <div class="col-12 text-center">
                            <!-- <img height="60px" src="./assets/images/iskcon_logo_black.png" /> -->
                        </div>
                    </div>
                    <div class="row text-center">
                        <div class="col-md-2"></div>
                        <div class="col-md-8">
                            <form class="elementor-form" method="post" id="frmRegThirdParty" name="Login Form">
                                <!-- <input size="1" type="hidden" name="form_fields[reg_redirect]" id="form-field-reg_redirect" class="elementor-field elementor-size-sm  elementor-field-textual" value="iskconfamily.elvanto.net"> -->
                                <!-- <input size="1" type="hidden" name="form_fields[reg_redirect]" id="form-field-reg_redirect" class="elementor-field elementor-size-sm  elementor-field-textual" value="iskcon.elvanto.net">
                                <div class="form-group">
                                    <span style="clear:both;display:none;color:red;" id="spIskconCommonReg"></span>
                                </div>
                                <div class="form-group  col-md-6">
                                    <input type="text" name="form_fields[reg_firstname]" id="form-field-reg_firstname" class="form-control" placeholder="Your First Name" required="required" aria-required="true">
                                </div>

                                <div class="form-group col-md-6">
                                    <input type="text" name="form_fields[reg_lastname]" id="form-field-reg_lastname" class="form-control" placeholder="Your Last Name" required="required" aria-required="true">
                                </div>
                                <div class="form-group col-md-6">
                                    <span style="clear:both;display:none;color:red;" id="spIskconFirstNameReg"></span>
                                </div>
                                <div class="form-group col-md-6">
                                    <span style="clear:both;display:none;color:red;" id="spIskconLastNameReg"></span>
                                </div>
                                <div class="Form-group col-md-12">
                                    <input type="email" name="form_fields[reg_email]" id="form-field-reg_email" class="form-control" placeholder="Your Email Address" required="required" aria-required="true">
                                </div>
                                <div class="form-group col-md-12">
                                    <span style="clear:both;display:none;color:red;" id="spIskconEmailReg"></span>
                                </div>
                                <div class="form-group col-md-12">
                                    <input type="text" name="form_fields[reg_username]" id="form-field-reg_username" class="form-control" placeholder="Desired Username" required="required" aria-required="true">
                                </div>
                                <div class="form-group col-md-12">
                                    <span style="clear:both;display:none;color:red;" id="spIskconUsernameReg"></span>
                                </div>
                                <div class="form-group col-md-12">
                                    <input type="password" name="form_fields[reg_password]" id="form-field-reg_password" class="form-control" placeholder="Password*" required="required" aria-required="true">
                                </div>
                                <div class="form-group col-md-12">
                                    <span style="clear:both;display:none;color:red;" id="spIskconPasswordReg"></span>
                                </div>
                                <div class="form-group col-md-12">
                                    <input type="password" name="form_fields[reg_repassword]" id="form-field-reg_repassword" class="form-control" placeholder="Confirm Password*" required="required" aria-required="true">
                                </div>
                                <div class="form-group col-md-12">
                                    <span style="clear:both;display:none;color:red;" id="spIskconRePassword2Reg"></span>
                                </div>
                                <div class="form-group col-md-12">
                                    <button type="submit" class="btn btn-primary SignUPButton" id="Reg_In_Button_1">Sign Up</button>
                                </div> -->
                            </form>
                        </div>
                    </div>
                </div>
                <!-- End Registration Form-->

            </div>
        <footer>
            <div class="footer">
                <p>
                    By using this site, you agree with our updated <a routerLink="/terms-and-condition">Terms & Privacy Policy</a>.
                </p>
            </div>
        </footer>
   
    <button onclick="topFunction()" id="myBtn" title="Go to top" style="display: none;">Top</button>

    <!-- Script from Existing APP -->
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <script>
         

	
	// replace this variable values with live site URL. 
        var AddDomain ="http://localhost:8080";
		
		
// First Check trim function exist or not if not exist create its own function
if (typeof String.prototype.trim != 'function') { // detect native implementation
  String.prototype.trim = function () {
    return this.replace(/^\s+/, '').replace(/\s+$/, '');
  };
}

// Create Ajax Object for ajax Call.
var ajax = {};
ajax.x = function () {
    if (typeof XMLHttpRequest !== 'undefined') {
        return new XMLHttpRequest();
    }
    var versions = [
        "MSXML2.XmlHttp.6.0",
        "MSXML2.XmlHttp.5.0",
        "MSXML2.XmlHttp.4.0",
        "MSXML2.XmlHttp.3.0",
        "MSXML2.XmlHttp.2.0",
        "Microsoft.XmlHttp"
    ];
	var xhr;
    for (var i = 0; i < versions.length; i++) {
        try {
            xhr = new ActiveXObject(versions[i]);
            break;
        } catch (e) {
        }
    }
    return xhr;
};

ajax.send = function (url, callback, method, data, async) {
    if (async === undefined) {
        async = true;
    }
    var x = ajax.x();
	x.withCredentials = true;
    x.open(method, url, async);
    x.onreadystatechange = function () {
   // debugger;
	    if (x.readyState == 4) {
	 callback(x.responseText)
        }
    };
    if (method == 'POST') {
        x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    }
    x.send(data);
};

ajax.get = function (url, data, callback, async) {
    var query = [];
    for (var key in data) {
        query.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));
    }
    ajax.send(url + (query.length ? '?' + query.join('&') : ''), callback, 'GET', null, async)
};

ajax.post = function (url, data, callback, async) {
    var query = [];
    for (var key in data) {
        query.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));
    }
    ajax.send(url, callback, 'POST', query.join('&'), async)
};


var strFromAppend="form-field-";
        function validatedata() {
            document.getElementById("spIskconUsername").style.display = "none";
            document.getElementById("spIskconPassword").style.display = "none";
            document.getElementById("spIskconCommon").style.display = "none";
            var blnreturn = true;
            if (document.getElementById(strFromAppend+"login_username").value.trim() == "") {
                document.getElementById("spIskconUsername").innerHTML = "Please enter username.";
                document.getElementById("spIskconUsername").style.display = "block";
                blnreturn = false;
            }
            if (document.getElementById(strFromAppend+"login_password").value.trim() == "") {
                document.getElementById("spIskconPassword").innerHTML = "Please enter password.";
                document.getElementById("spIskconPassword").style.display = "block";
                blnreturn = false;
            }
            return blnreturn;
        }

        // new code for auto login
        function startLoginAuto(blnregistration)
                    {

					 var nameofhost=document.getElementById(strFromAppend+"login_login_redirect").value;

                    	var usercok = getCookie("remiskcon");

                    	if(usercok!=""){

                        	if(window.location.href.indexOf("logout=1")>-1 && blnregistration==false){
                        	    usercok="";
                        	    setCookie('remiskcon','',1);
                        	    document.cookie = 'remiskcon=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                        	    ajax.get(AddDomain+'/logout', {}, function(responseText) {
								});
                        	}
                    	}

                      if (usercok != "") {


                    		ajax.post(AddDomain+'/login', {coki:usercok,username:'',password:'',hostname:nameofhost}, function(responseText) {
                    		var responsedata=JSON.parse(responseText.trim());
                    				if(responsedata!=null && responsedata!=undefined && responsedata['success']!=null && responsedata['success']!=undefined &&  responsedata['success']=="1")
                    				{

                    				var username="";
                    				var password="";
                    					if(responsedata['uname']!=null && responsedata['uname']!=undefined && responsedata['uname']!="")
                    					{
                    							username=responsedata['uname'];
                    							document.getElementById(strFromAppend+"login_username").value=username;
                    					}
                    					if(responsedata['pass']!=null && responsedata['pass']!=undefined && responsedata['pass']!="")
                    					{
                    							password=responsedata['pass'];
                    							document.getElementById(strFromAppend+"login_password").value=password;
                    					}
                    					if(username!="" && password!="")
                    					{
                    					    jQuery("#"+strFromAppend+"login_username").attr("name","login_username");
											jQuery("#"+strFromAppend+"login_password").attr("name","login_password");
											jQuery("#"+strFromAppend+"login_login_redirect").attr("name","hostname");

                    					   document.getElementById("frmThirdParty").action = AddDomain+'/member/';


                                            document.getElementById("frmThirdParty").submit();
                    						return true;
                    					}

                    				}

                    		});
                      }
                    }
                    function setCookie(cname, cvalue, exdays) {
                      var d = new Date();
                      d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                      var expires = "expires="+d.toUTCString();
                      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                    }

                    function getCookie(cname) {
                      var name = cname + "=";
                      var ca = document.cookie.split(';');
                      for(var i = 0; i < ca.length; i++) {
                        var c = ca[i];
                        while (c.charAt(0) == ' ') {
                          c = c.substring(1);
                        }
                        if (c.indexOf(name) == 0) {
                          return c.substring(name.length, c.length);
                        }
                      }
                      return "";
                    }

        // end of new code.

        // Registration validation

        function validateregdata()
{
	document.getElementById("spIskconFirstNameReg").style.display="none";
	document.getElementById("spIskconLastNameReg").style.display="none";
	document.getElementById("spIskconEmailReg").style.display="none";
	//document.getElementById("spIskconPhone").style.display="none";
	//document.getElementById("spIskconMobile").style.display="none";
	document.getElementById("spIskconUsernameReg").style.display="none";
	document.getElementById("spIskconPasswordReg").style.display="none";
	document.getElementById("spIskconRePassword2Reg").style.display="none";

	document.getElementById("spIskconCommonReg").style.display="none";
	var blnreturn=true;
	if(document.getElementById(strFromAppend+"reg_firstname").value.trim()=="")
	{
		document.getElementById("spIskconFirstNameReg").innerHTML="Please enter firstname.";
		document.getElementById("spIskconFirstNameReg").style.display="block";
		blnreturn=false;
	}
	if(document.getElementById(strFromAppend+"reg_lastname").value.trim()=="")
	{
		document.getElementById("spIskconLastNameReg").innerHTML="Please enter lastname.";
		document.getElementById("spIskconLastNameReg").style.display="block";
		blnreturn=false;
	}
	if(document.getElementById(strFromAppend+"reg_email").value.trim()=="")
	{
		document.getElementById("spIskconEmailReg").innerHTML="Please enter email.";
		document.getElementById("spIskconEmailReg").style.display="block";
		blnreturn=false;
	}
	/*if(document.getElementById("reg_phone").value.trim()=="")
	{
		document.getElementById("spIskconPhone").innerHTML="Please enter lastname.";
		document.getElementById("spIskconPhone").style.display="block";
		blnreturn=false;
	}
	if(document.getElementById("reg_mobile").value.trim()=="")
	{
		document.getElementById("spIskconMobile").innerHTML="Please enter lastname.";
		document.getElementById("spIskconMobile").style.display="block";
		blnreturn=false;
	}*/
	if(document.getElementById(strFromAppend+"reg_username").value.trim()=="")
	{
		document.getElementById("spIskconUsernameReg").innerHTML="Please enter username.";
		document.getElementById("spIskconUsernameReg").style.display="block";
		blnreturn=false;
	}
	if(document.getElementById(strFromAppend+"reg_password").value.trim()=="")
	{
		document.getElementById("spIskconPasswordReg").innerHTML="Please enter password.";
		document.getElementById("spIskconPasswordReg").style.display="block";
		blnreturn=false;
	}

	if(document.getElementById(strFromAppend+"reg_password").value.trim()!=document.getElementById(strFromAppend+"reg_repassword").value.trim())
	{
		document.getElementById("spIskconPasswordReg").innerHTML="Both password must be same";
		document.getElementById("spIskconPasswordReg").style.display="block";
		blnreturn=false;
	}
	if(document.getElementById(strFromAppend+"reg_password").value.trim()!="" && (document.getElementById(strFromAppend+"reg_password").value.trim()==document.getElementById(strFromAppend+"reg_repassword").value.trim()))
	{
			var strError="";
		if(document.getElementById(strFromAppend+"reg_password").value.trim().length<7)
		{
			strError="Passwords need to be at least 8 characters long<br/>";

		}
		var strpassword =document.getElementById(strFromAppend+"reg_password").value.trim();
		var blnUpper=false;
		var blnLower=false;
		var blnNumber=false;
		var blnOtherChar=false;
		var blnTwoTime=false;
		var arrchar=new Array();
		for(var i=0; i<strpassword.length;i++)
		{
			if(strpassword.charCodeAt(i)>=65 && strpassword.charCodeAt(i)<=90)
			{
			blnUpper=true;
			}
			else if(strpassword.charCodeAt(i)>=97 && strpassword.charCodeAt(i)<=122)
			{
			blnLower=true;
			}
			else if(strpassword.charCodeAt(i)>=48 && strpassword.charCodeAt(i)<=57)
			{
			blnNumber=true;
			}
			else
			{
			blnOtherChar=true;
			}
			if(!arrchar[strpassword[i]])
			{
			arrchar[strpassword[i]]=1;
			}
			else
			{
				var intval =arrchar[strpassword[i]];
				if(intval==2)
				{
				blnTwoTime=true;
				}
				arrchar[strpassword[i]]=intval+1;
			}


		}
		if((!blnUpper) ||(!blnLower) ||(!blnNumber) ||(!blnOtherChar) || blnTwoTime)
		{
			strError+="Passwords contain at least one uppercase letter, one lowercase letter, one number & one non-alphanumeric character. No character may be repeated more than 2 times in a row.";

		}
		if(strError!="")
		{
		document.getElementById("spIskconPasswordReg").innerHTML=strError;
		document.getElementById("spIskconPasswordReg").style.display="block";
		blnreturn=false;
		}
	}
	return blnreturn;
}

        //end of Registration validation.


document.addEventListener("DOMContentLoaded", function(event) {
	jQuery('#Log_In_Button_1').click(function(){
	// Javascrip code here

            if (validatedata()) {
                document.getElementById(strFromAppend+"login_username").setAttribute("name","login_username");
                document.getElementById(strFromAppend+"login_password").setAttribute("name","login_password");
                var nameofhost=document.getElementById(strFromAppend+"login_login_redirect").value;
               jQuery("#"+strFromAppend+"login_login_redirect").attr("name","hostname");
                //ajax.post('https://localhost/login', {username: document.getElementById("login_username").value,password:document.getElementById("login_password").value}, function(responseText) {
                ajax.post(AddDomain+'/login', {
                    username: document.getElementById(strFromAppend+"login_username").value,
                    password: document.getElementById(strFromAppend+"login_password").value,hostname:nameofhost
                }, function(responseText) {
                    //console.log('res is', responseText)
                    var responsedata=JSON.parse(responseText.trim());

                    if(responsedata!=null && responsedata!=undefined && responsedata['success']!=null && responsedata['success']!=undefined &&  responsedata['success']=="1") {
                        if(responsedata['cok']!=null && responsedata['cok']!=undefined)
					{
						setCookie("remiskcon",responsedata["cok"],365);
					}
					jQuery("#"+strFromAppend+"login_username").attr("name","login_username");
					jQuery("#"+strFromAppend+"login_password").attr("name","login_password");
					jQuery("#"+strFromAppend+"login_login_redirect").attr("name","hostname");
                    //  console.log('reached', document.getElementById("frmThirdParty"))
                       document.getElementById("frmThirdParty").action = AddDomain+'/member/';
                       document.getElementById("frmThirdParty").submit();
                        return true;
                    } else {
                        document.getElementById("spIskconCommon").innerHTML = "Your Login detail is not correct.";
                        document.getElementById("spIskconCommon").style.display = "block";
                    }
                }, function(error) {
                    console.log('eee', error)
                })
            }
            return false;
	});

	// registration Page


jQuery('#Reg_In_Button_1').click( function(){
	if(validateregdata())
	{

var nameofhost=document.getElementById(strFromAppend+"login_login_redirect").value;
		ajax.post(AddDomain+'/register', {username: document.getElementById(strFromAppend+"reg_username").value,password:document.getElementById(strFromAppend+"reg_password").value,firstname: document.getElementById(strFromAppend+"reg_firstname").value,lastname: document.getElementById(strFromAppend+"reg_lastname").value,email: document.getElementById(strFromAppend+"reg_email").value,phone:'',mobile:'',hostname:nameofhost}, function(responseText) {

		var responsedata=JSON.parse(responseText.trim());

                    if(responsedata!=null && responsedata!=undefined && responsedata['success']!=null && responsedata['success']!=undefined &&  responsedata['success']=="1") {
                     if(responsedata['cok']!=null && responsedata['cok']!=undefined)
					{
						setCookie("remiskcon",responsedata["cok"],365);
						startLoginAuto(true);
					}
				}
				else
				{
				if(responsedata!=null && responsedata!=undefined && responsedata['err']!=null && responsedata['err']!=undefined){
				document.getElementById("spIskconCommonReg").innerHTML=responsedata['err'];
				}
				else
				{
				document.getElementById("spIskconCommonReg").innerHTML="Issue in registration process. Kindly try it agian after sometime."
				}
				document.getElementById("spIskconCommonReg").style.display="block";
				}
		});
	}
	return false;
});
	// End of Registration Page.

return false;
	});

	jQuery(document).ready(function(){
	// new code
	startLoginAuto(false);
	jQuery(".hamburger--boring").click(function(){
	
	if(jQuery(".hamburger--boring").hasClass("is-active")){
	jQuery(".hamburger--boring").delay(2000).removeClass("is-active");
	jQuery("#site-nav").delay(2000).removeClass("is-active");
	}
	else
	{
	jQuery(".hamburger--boring").delay(2000).addClass("is-active");
	jQuery("#site-nav").delay(2000).addClass("is-active");
	}
	});
	});
	//end code


    </script>


    <!-- End of Script from Existing APP -->

</body>


<script src="./assets/js/lib/jquery.js"></script>
</script>
<!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtFDAommrF3j029D-odjTunwIN-hX2iNM"
        async defer></script>-->
</html>
